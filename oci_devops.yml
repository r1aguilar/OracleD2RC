version: 0.1
component: build
timeoutInSeconds: 900
shell: bash

env:
  variables:
    JAVA_HOME: /usr/lib64/graalvm/graalvm22-ee-java17

steps:
  - type: Command
    name: "Instalar GraalVM Native Image"
    command: yum -y install graalvm22-ee-17-native-image

  - type: Command
    name: "Simulación de build y push Docker"
    command: |
      export PATH=$JAVA_HOME/bin:$PATH
      echo "Simulando creación de imagen Docker..."
      IMAGE="mx-queretaro-1.ocir.io/tu_namespace/mtdr-spring:auto$(date +%s)"
      echo "##IMAGE_NAME=$IMAGE" >> $OCI_OUTPUT_DIR/output_params
      echo "Imagen simulada: $IMAGE"

outputParameters:
  - name: IMAGE_NAME
    type: STRING
